{% extends 'base.html' %}

{% block page_title %}{{ user }}'s groups{% endblock %}

{% block content %}
<div class="page-container group-page">
    
    {% if reg_error == "yes" %}
    <form class="create-group-form" method="POST" action="{% url 'create-group' %}" autocomplete="off">
    {% else %}
    <form class="create-group-form start-hidden" method="POST" action="{% url 'create-group' %}" autocomplete="off">
    {% endif %}
        <div class="close-parent-btn">x</div>
        {% csrf_token %}
        {{ create_group_form.as_p }}
        {{ form.non_field_errors }}
        <button class="new-group-btn make-pointer" type="submit">Create</button>
    </form>
    <section class="create-join-group-area">
        <h1 class="uppercase">Your Groups</h1> 
        <div class="container">
            <div class="create-group-box">
                <p>Create a new group</p>
            </div>
            <i class="fas fa-plus-square show-create-new-group-form make-pointer"></i>
            <div class="join-group-box">
                <p>Join an existing group</p>
            </div>
            <i class="far fa-plus-square make-pointer"></i>
        </div>
    </section>
    <section class="group-select-area">
        {% if not my_groups %}
            <p>You are currently without a group</p> 
        {% else %}
            {% for group in my_groups %}
            <div class="container group-box">
                <div class="container group-details-container">
                    <h2>{{ group.group_name }}</h2>
                    <p>Creator - {{ group.creator }}</p>
                    <p>Next match - TBC</p>
                </div>
                <div class="container members-details-container">
                    <div class="flex">
                        <div class="container">
                            <p>Members</p>
                            <p>{{ group.users.all|length }}</p>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% endif %}
    </section>
</div>


{% endblock %}